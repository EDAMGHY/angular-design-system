<article
  class="border border-neutral-200 bg-level-5 rounded w-full flex flex-col gap-4"
  [ngClass]="className"
>
  <!-- Header -->
  <div
    class="flex gap-5 items-center justify-between transition-all duration-300 ease-in"
    [ngClass]="showAccordion ? 'px-3.5 pt-3.5' : 'p-3.5'"
  >
    <div class="flex flex-wrap gap-2 items-center justify-start">
      <div
        class="size-10 flex justify-center items-center border border-neutral-300 bg-level-4 rounded-full"
      >
        <ds-icon id="bank2" class="size-5 text-primary"></ds-icon>
      </div>
      <div class="flex-1 flex flex-col col-span-2 justify-between gap-y-1.5">
        <span
          *ngIf="type"
          class="inline-flex items-center justify-start gap-1 text-neutral-900 text-[12px] leading-[12px]"
        >
          <span>{{ type }}</span>
          <a *ngIf="editLink" [href]="editLink">
            <ds-icon id="edit-contained-1" class="size-3"></ds-icon>
          </a>
        </span>
        <ds-display-value [value]="account_number">
          <p class="text-neutral-900 text-[14px] leading-[14px] font-bold">
            {{ account_number }}
          </p>
        </ds-display-value>
      </div>
    </div>

    <div class="flex gap-5 items-center">
      <!-- Solde Comptable -->
      <ds-display-value [value]="solde_comptable">
        <ds-balance-formatter
          *ngIf="solde_comptable"
          [isDiscrete]="isDiscrete"
          [balance]="solde_comptable"
          [currency]="currency"
          class="text-[16px] leading-[16px] font-bold"
          currencyClassName="text-[12px] leading-[12px]"
        ></ds-balance-formatter>
      </ds-display-value>

      <!-- Date -->
      <ds-display-value [value]="date">
        <p class="text-neutral-900 font-bold text-[16px] leading-6">
          {{ date }}
        </p>
      </ds-display-value>

      <!-- Solde Temps RÃ©el -->
      <ds-display-value [value]="solde_temps_reel">
        <ds-balance-formatter
          *ngIf="solde_temps_reel"
          [isDiscrete]="isDiscrete"
          [balance]="solde_temps_reel"
          [currency]="currency"
          class="text-[16px] leading-[16px] font-bold"
          currencyClassName="text-[12px] leading-[12px]"
        ></ds-balance-formatter>
      </ds-display-value>

      <!-- Toolbox -->
      <div
        class="flex-1 flex justify-end text-neutral-900 items-center gap-5 w-full"
      >
        <ng-container *ngFor="let action of actionsList; let i = index">
          <button (click)="action.onClick && action.onClick()" *ngIf="action">
            <ds-icon
              *ngIf="action.icon"
              [id]="action.icon"
              class="size-5"
            ></ds-icon>
          </button>
        </ng-container>

        <button *ngIf="true" (click)="toggleAccordion()">
          <ds-icon
            id="arrow-down"
            [class]="
              showAccordion
                ? 'size-5 transform rotate-180 transition-all duration-300 ease-out'
                : 'size-5 transition-all duration-300 ease-out'
            "
          ></ds-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Accordion Content -->
  <div
    *ngIf="showAccordion"
    class="bg-card-level-4 p-4 border-t border-neutral-200 w-full rounded-b-sm"
  >
    <ng-content></ng-content>
  </div>
</article>
