<table [ngClass]="theme[variant].table">
  <thead [ngClass]="theme[variant].header">
    <tr class="rounded overflow-hidden">
      <!-- 1) HEADER ds-checkbox -->
      <th
        *ngIf="selectionEnabled"
        [ngClass]="[theme[variant].headerCell, 'w-[30px] rounded-l-md']"
      >
        <ds-checkbox
          [checked]="isAllSelected"
          [disabled]="displayData.length === 0"
          [change]="headerCheckboxChange"
        ></ds-checkbox>
      </th>

      <th
        *ngFor="let col of columns; let idx = index"
        [ngClass]="[
          theme[variant].headerCell,
          !col.sortable ? 'pb-2.5 pt-0' : '',
          idx === 0 ? 'rounded-l-md' : '',
          columns.length - 1 === idx ? 'rounded-r-md' : '',
          col.sortable ? theme[variant].headerCellSortable : ''
        ]"
      >
        <span *ngIf="!col.sortable" [ngClass]="[theme[variant].headerTh]">
          <span [ngClass]="[theme[variant].headerIcons]">
            <!-- default “no sort” icon -->
            <ds-icon
              *ngIf="col.sortable && sortColumn !== col.accessor"
              id="filter-up-down"
              size="12"
            ></ds-icon>

            <!-- asc / desc icons -->
            <ng-container *ngIf="sortColumn === col.accessor">
              <ds-icon
                *ngIf="sortDirection === 'asc'"
                id="filter-up"
                size="12"
              ></ds-icon>
              <ds-icon
                *ngIf="sortDirection === 'desc'"
                id="filter-down"
                size="12"
              ></ds-icon>
            </ng-container>
          </span>
          <span [ngClass]="[theme[variant].headerText]">
            {{ col.header }}
          </span>
        </span>
        <button
          *ngIf="col.sortable"
          [ngClass]="[theme[variant].headerCellButton]"
          (click)="col.sortable && onSort(col)"
        >
          <span [ngClass]="[theme[variant].headerTh]">
            <span [ngClass]="[theme[variant].headerIcons]">
              <!-- default “no sort” icon -->
              <ds-icon
                *ngIf="col.sortable && sortColumn !== col.accessor"
                id="filter-up-down"
                size="12"
              ></ds-icon>

              <!-- asc / desc icons -->
              <ng-container *ngIf="sortColumn === col.accessor">
                <ds-icon
                  *ngIf="sortDirection === 'asc'"
                  id="filter-up"
                  size="12"
                ></ds-icon>
                <ds-icon
                  *ngIf="sortDirection === 'desc'"
                  id="filter-down"
                  size="12"
                ></ds-icon>
              </ng-container>
            </span>
            <span [ngClass]="[theme[variant].headerText]">
              {{ col.header }}
            </span>
          </span>
        </button>
      </th>
    </tr>
  </thead>
  <tbody [ngClass]="theme[variant].body">
    <tr
      *ngFor="let row of displayData; let i = index"
      [ngClass]="theme[variant].row(i)"
    >
      <!-- ROW ds-checkbox -->
      <td *ngIf="selectionEnabled" [ngClass]="theme[variant].cell">
        <ds-checkbox
          [checked]="isSelected(row)"
          [change]="getRowCheckboxChange(row)"
        ></ds-checkbox>
      </td>

      <td *ngFor="let col of columns" [ngClass]="theme[variant].cell">
        <ng-container
          *ngIf="col.cellTemplate; else defaultCell"
          [ngTemplateOutlet]="col.cellTemplate"
          [ngTemplateOutletContext]="{
            $implicit: row[col.accessor],
            row: row
          }"
        ></ng-container>
        <ng-template #defaultCell>
          {{ row[col.accessor] }}
        </ng-template>
      </td>
    </tr>
  </tbody>
</table>
